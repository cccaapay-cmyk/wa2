<script>
(function () {
  var links = [
    "https://wa.me/4915211857304",
    "https://wa.me/4915212030191",
    "https://wa.me/4915211402895",
    "https://wa.me/4915211532957",
    "https://wa.me/4915211268639",
    "https://wa.me/4915211301699"
  ];

  var bagKey = "wa_shuffle_bag_v1";
  var idxKey = "wa_shuffle_idx_v1";

  function shuffle(arr) {
    for (var i = arr.length - 1; i > 0; i--) {
      var j = Math.floor(Math.random() * (i + 1));
      var t = arr[i]; arr[i] = arr[j]; arr[j] = t;
    }
    return arr;
  }

  // 读取/初始化“随机轮询队列”
  var bag;
  try { bag = JSON.parse(localStorage.getItem(bagKey) || "null"); } catch (e) { bag = null; }

  if (!Array.isArray(bag) || bag.length !== links.length) {
    bag = shuffle(links.slice());
    localStorage.setItem(bagKey, JSON.stringify(bag));
    localStorage.setItem(idxKey, "0");
  }

  var idx = parseInt(localStorage.getItem(idxKey) || "0", 10);
  if (!isFinite(idx) || idx < 0) idx = 0;

  // 取当前一个号
  var url = bag[idx % bag.length];
  idx++;

  // 一轮结束后重新洗牌（保证每轮均匀 + 下一轮仍随机）
  if (idx % bag.length === 0) {
    bag = shuffle(links.slice());
    localStorage.setItem(bagKey, JSON.stringify(bag));
    idx = 0;
  }
  localStorage.setItem(idxKey, String(idx));

  // 可选：延迟更自然（你要秒跳就改成 0 或删掉 setTimeout）
  setTimeout(function () {
    window.location.replace(url);
  }, 800);
})();
</script>
